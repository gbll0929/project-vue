{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\拜尔\\上海拜耳口腔\\DoctorO2O\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\拜尔\\上海拜耳口腔\\DoctorO2O\\src\\pages\\reg.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\拜尔\\上海拜耳口腔\\DoctorO2O\\src\\pages\\reg.vue","mtime":1578487916970},{"path":"C:\\Users\\Administrator\\Desktop\\拜尔\\上海拜耳口腔\\DoctorO2O\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577497056000},{"path":"C:\\Users\\Administrator\\Desktop\\拜尔\\上海拜耳口腔\\DoctorO2O\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1577497044000},{"path":"C:\\Users\\Administrator\\Desktop\\拜尔\\上海拜耳口腔\\DoctorO2O\\node_modules\\babel-loader\\lib\\index.js","mtime":1577497138000},{"path":"C:\\Users\\Administrator\\Desktop\\拜尔\\上海拜耳口腔\\DoctorO2O\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1577497056000},{"path":"C:\\Users\\Administrator\\Desktop\\拜尔\\上海拜耳口腔\\DoctorO2O\\node_modules\\vue-loader\\lib\\index.js","mtime":1577497122000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport GoBack from '../components/goback.vue'\nimport LogRegButton from '../components/log-reg-button.vue'\nimport Getpass from '../components/getpass.vue'\nimport Codetest from '../components/codetest.vue'\nexport default{\n\tdata(){return {\n\t\tnewData:'',\n\t\tusername:'',\n\t\tphonenumber:'',\n\t\tpassword:'',\n\t\tphonecode:'',\n\t\tmess:'',\n\t\tbmess:false,\n\t\tbcode:false,\n\t\tbphone:false,\n\t\tbname:false,\n\t\tbphonecode:false,\n\t\tbpass:false,\n\t\tbleave:true,\n\t\tmsgcode:0,\n\t}},\n\tcomponents:{\n\t\tGoBack,\n\t\tLogRegButton,\n\t\tGetpass,\n\t\tCodetest\n\t},\n\tmounted(){\n\t},\n\tupdated(){\n\t},\n\tmethods:{\n\t\tupload(){\n\t\t   let file=document.getElementById('file');\n\t\t   file.click()\n\t\t},\n\t\tchange(data){\n\t\t\tthis.newData = data;\n\t\t},\n\t\ttest(){\n\t\t\tconsole.log(this.newData)\n\t\t\tlet code = document.querySelector('.reg__ul__code input');\n\t\t\tif(code.value == this.newData){\n\t\t\t\tthis.bmess=false;\n\t\t\t\tthis.bcode=true;\n\t\t\t}else{\n\t\t\t\tthis.bmess=true;\n\t\t\t\tthis.mess=\"验证失败！\"\n\t\t\t\tthis.bcode=false;\n\t\t\t}\n\t\t},\n\t\ttestphone(){\n\t\t\tlet pn = document.querySelector(\".reg__ul__tel input\");\n\t\t\tif (/^1[0-9]{10}$/.test(pn.value)) {\n\t\t\t\tthis.bmess=false;\n\t\t\t    this.bphone = true;\n\t\t\t} else {\n\t\t\t\tthis.bmess=true;\n\t\t\t    this.mess = \"手机号码格式不正确\";\n\t\t\t    this.bphone = false;\n\t\t\t}\n\t\t},\n\t\ttestname(){\n\t\t\tlet name = document.querySelector(\".reg__ul__name input\");\n\t\t\t// 用户名：4-16位字母、数字或汉字，请不要输入特殊字符！\n\t\t\tif (/^[\\u2E80-\\u9FFFa-zA-Z\\d]{4,16}$/.test(name.value)) {\n\t\t\t\tthis.bmess=false;\n\t\t\t    this.bname = true;\n\t\t\t} else {\n\t\t\t\tthis.bmess=true;\n\t\t\t    this.mess = \"用户名格式不正确\";\n\t\t\t    this.bname = false;\n\t\t\t}\n\t\t},\n\t\ttestpass(){\n\t\t\tlet pass = document.querySelector(\".reg__ul__pass input\");\n\t\t\tif (/^[a-zA-Z\\d]{6,20}$/.test(pass.value)) {\n\t\t\t\tthis.bmess=false;\n\t\t\t    this.bpass = true;\n\t\t\t} else {\n\t\t\t\tthis.bmess=true;\n\t\t\t    this.mess = \"请输入6-20位的字母或数字\";\n\t\t\t    this.bpass = false;\n\t\t\t}\n\t\t},\n\t\ttestphonecode(){\n\t\t\tlet telcode = document.querySelector(\".reg__ul__telcode input\");\n\t\t\tif (telcode.value == this.msgcode  ) {\n\t\t\t\tthis.mess=false;\n\t\t\t    this.bphonecode = true;\n\t\t\t} else {\n\t\t\t\tthis.bmess=true;\n\t\t\t    this.mess = \"短信验证失败\";\n\t\t\t    this.bphonecode = false;\n\t\t\t}\n\t\t},\n\t\treg() {\n\t\t\tif(!this.bcode || !this.bphone || !this.bname || !this.bpass || !this.bphonecode){\n\t\t\t\tthis.bmess=true;\n\t\t\t\tthis.mess=\"请填入完整信息\";\n\t\t\t\treturn\n\t\t\t}\n\t\t\tlet formData = new FormData();\n\t\t\tformData.append('username',this.username)\n\t\t\tformData.append('phonenumber',this.phonenumber)\n\t\t\tformData.append('password',this.password)\n\t\t\tlet file=document.getElementById('file');\n\t\t\tformData.append('icon',file.files[0]);\n\t\t\taxios({\n\t\t\t\turl: '/api/reg',\n\t\t\t\tmethod: 'post',\n\t\t\t\tdata: formData\n\t\t\t}).then(\n\t\t\t\tres => {\n\t\t\t\t\tif(res.data.err==0){\n\t\t\t\t\t\t// console.log(res.data);\n\t\t\t\t\t\tthis.bleave = false; // 注册成功时不用后置守卫\n\t\t\t\t\t\tthis.$router.push('/login'); // 跳转到登录页面\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.bmess=true\n\t\t\t\t\t\tthis.mess=res.data.msg;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t},\n\t\tsendcode(){\n\t\t\taxios({\n\t\t\t\turl: '/api/send-code',\n\t\t\t\tparams: {tel:this.phonenumber}\n\t\t\t}).then(\n\t\t\t\tres => this.msgcode = res.data.code\n\t\t\t\t// res => console.log(res.data)\n\t\t\t)\n\t\t}\n\t},\n\tbeforeRouteLeave (to, from, next) { //后置守卫 组件内部\n\t  // 导航离开该组件的对应路由时调用\n\t  // 可以访问组件实例 `this`\n\t  \n\t\tif(this.bleave){\n\t\t\tlet path = '';\n\t\t\tswitch(to.path) {\n\t\t\t    case '/home':\n\t\t\t\t\tpath = '首页';\n\t\t\t\t\tbreak;\n\t\t\t    case '/login':\n\t\t\t\t\tpath = '登录';\n\t\t\t\t\tbreak;\n\t\t\t\tcase '/doc-list':\n\t\t\t\t\tpath = '专家介绍';\n\t\t\t\t\tbreak;\n\t\t\t\tcase '/doc-case':\n\t\t\t\t\tpath = '医院案例';\n\t\t\t\t\tbreak;\n\t\t\t\tcase '/dynamic':\n\t\t\t\t\tpath = '医院动态';\n\t\t\t\t\tbreak;\n\t\t\t\tcase '/discount':\n\t\t\t\t\tpath = '医院优惠';\n\t\t\t\t\tbreak;\n\t\t\t    default:\n\t\t\t        path = '其它页面';\n\t\t\t} \n\t\t\tlet isTo = window.confirm(`您确定要去往${path}了吗?`)\n\t\t\tisTo ? next(true) : next(false)\n\t\t}else{\n\t\t\tnext()\n\t\t}\n\t  \n\t},\n\t\n}\n",{"version":3,"sources":["reg.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"reg.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n\t<div class=\"reg\">\r\n\t\t<GoBack data=\"注册\"></GoBack>\r\n\t\t<ul class=\"reg__ul\">\r\n\t\t\t<li class=\"reg__ul__code\"><input type=\"text\" placeholder=\"输入右边的验证码\" @blur=\"test\"><span><Codetest @event=\"change($event)\" @click.native=\"test\"/></span></li>\r\n\t\t\t<li class=\"reg__ul__name\"><input type=\"text\" placeholder=\"用户名:4-16位字母、数字或汉字\" @blur=\"testname\" v-model=\"username\"></li>\r\n\t\t\t<li class=\"reg__ul__tel\"><input type=\"number\" placeholder=\"手机号码\" @blur=\"testphone\" v-model=\"phonenumber\"></li>\r\n\t\t\t<li class=\"reg__ul__telcode\"><input type=\"number\" placeholder=\"输入收到的验证码\" @blur=\"testphonecode\" v-model=\"phonecode\"><span @click=\"sendcode\">点击发送验证码</span></li>\r\n\t\t\t<li class=\"reg__ul__pass\"><input type=\"password\" @blur=\"testpass\" placeholder=\"设置密码：6-20位数字和字母\" v-model=\"password\"></li>\r\n\t\t\t<li class=\"reg__ul__file\"><h4 id=\"h4\" @click=\"upload\">上传头像</h4><input type=\"file\" id=\"file\" value=\"上传头像\"></li>\r\n\t\t\t<li class=\"reg__ul__mess\" v-show=\"bmess\">{{mess}}</li>\r\n\t\t\t<LogRegButton text=\"注册\" @click.native=\"reg\"></LogRegButton>\r\n\t\t\t<Getpass text=\"登录\" url=\"/login\"/>\r\n\t\t</ul>\r\n\t</div>\n</template>\n\n<script>\r\n\timport GoBack from '../components/goback.vue'\r\n\timport LogRegButton from '../components/log-reg-button.vue'\r\n\timport Getpass from '../components/getpass.vue'\r\n\timport Codetest from '../components/codetest.vue'\r\n\texport default{\r\n\t\tdata(){return {\r\n\t\t\tnewData:'',\r\n\t\t\tusername:'',\r\n\t\t\tphonenumber:'',\r\n\t\t\tpassword:'',\r\n\t\t\tphonecode:'',\r\n\t\t\tmess:'',\r\n\t\t\tbmess:false,\r\n\t\t\tbcode:false,\r\n\t\t\tbphone:false,\r\n\t\t\tbname:false,\r\n\t\t\tbphonecode:false,\r\n\t\t\tbpass:false,\r\n\t\t\tbleave:true,\r\n\t\t\tmsgcode:0,\r\n\t\t}},\r\n\t\tcomponents:{\r\n\t\t\tGoBack,\r\n\t\t\tLogRegButton,\r\n\t\t\tGetpass,\r\n\t\t\tCodetest\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t},\r\n\t\tupdated(){\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tupload(){\r\n\t\t\t   let file=document.getElementById('file');\r\n\t\t\t   file.click()\r\n\t\t\t},\r\n\t\t\tchange(data){\r\n\t\t\t\tthis.newData = data;\r\n\t\t\t},\r\n\t\t\ttest(){\r\n\t\t\t\tconsole.log(this.newData)\r\n\t\t\t\tlet code = document.querySelector('.reg__ul__code input');\r\n\t\t\t\tif(code.value == this.newData){\r\n\t\t\t\t\tthis.bmess=false;\r\n\t\t\t\t\tthis.bcode=true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.bmess=true;\r\n\t\t\t\t\tthis.mess=\"验证失败！\"\r\n\t\t\t\t\tthis.bcode=false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttestphone(){\r\n\t\t\t\tlet pn = document.querySelector(\".reg__ul__tel input\");\r\n\t\t\t\tif (/^1[0-9]{10}$/.test(pn.value)) {\r\n\t\t\t\t\tthis.bmess=false;\r\n\t\t\t\t    this.bphone = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.bmess=true;\r\n\t\t\t\t    this.mess = \"手机号码格式不正确\";\r\n\t\t\t\t    this.bphone = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttestname(){\r\n\t\t\t\tlet name = document.querySelector(\".reg__ul__name input\");\r\n\t\t\t\t// 用户名：4-16位字母、数字或汉字，请不要输入特殊字符！\r\n\t\t\t\tif (/^[\\u2E80-\\u9FFFa-zA-Z\\d]{4,16}$/.test(name.value)) {\r\n\t\t\t\t\tthis.bmess=false;\r\n\t\t\t\t    this.bname = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.bmess=true;\r\n\t\t\t\t    this.mess = \"用户名格式不正确\";\r\n\t\t\t\t    this.bname = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttestpass(){\r\n\t\t\t\tlet pass = document.querySelector(\".reg__ul__pass input\");\r\n\t\t\t\tif (/^[a-zA-Z\\d]{6,20}$/.test(pass.value)) {\r\n\t\t\t\t\tthis.bmess=false;\r\n\t\t\t\t    this.bpass = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.bmess=true;\r\n\t\t\t\t    this.mess = \"请输入6-20位的字母或数字\";\r\n\t\t\t\t    this.bpass = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttestphonecode(){\r\n\t\t\t\tlet telcode = document.querySelector(\".reg__ul__telcode input\");\r\n\t\t\t\tif (telcode.value == this.msgcode  ) {\r\n\t\t\t\t\tthis.mess=false;\r\n\t\t\t\t    this.bphonecode = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.bmess=true;\r\n\t\t\t\t    this.mess = \"短信验证失败\";\r\n\t\t\t\t    this.bphonecode = false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\treg() {\r\n\t\t\t\tif(!this.bcode || !this.bphone || !this.bname || !this.bpass || !this.bphonecode){\r\n\t\t\t\t\tthis.bmess=true;\r\n\t\t\t\t\tthis.mess=\"请填入完整信息\";\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tlet formData = new FormData();\r\n\t\t\t\tformData.append('username',this.username)\r\n\t\t\t\tformData.append('phonenumber',this.phonenumber)\r\n\t\t\t\tformData.append('password',this.password)\r\n\t\t\t\tlet file=document.getElementById('file');\r\n\t\t\t\tformData.append('icon',file.files[0]);\r\n\t\t\t\taxios({\r\n\t\t\t\t\turl: '/api/reg',\r\n\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\tdata: formData\r\n\t\t\t\t}).then(\r\n\t\t\t\t\tres => {\r\n\t\t\t\t\t\tif(res.data.err==0){\r\n\t\t\t\t\t\t\t// console.log(res.data);\r\n\t\t\t\t\t\t\tthis.bleave = false; // 注册成功时不用后置守卫\r\n\t\t\t\t\t\t\tthis.$router.push('/login'); // 跳转到登录页面\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.bmess=true\r\n\t\t\t\t\t\t\tthis.mess=res.data.msg;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t},\r\n\t\t\tsendcode(){\r\n\t\t\t\taxios({\r\n\t\t\t\t\turl: '/api/send-code',\r\n\t\t\t\t\tparams: {tel:this.phonenumber}\r\n\t\t\t\t}).then(\r\n\t\t\t\t\tres => this.msgcode = res.data.code\r\n\t\t\t\t\t// res => console.log(res.data)\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t},\r\n\t\tbeforeRouteLeave (to, from, next) { //后置守卫 组件内部\r\n\t\t  // 导航离开该组件的对应路由时调用\r\n\t\t  // 可以访问组件实例 `this`\r\n\t\t  \r\n\t\t\tif(this.bleave){\r\n\t\t\t\tlet path = '';\r\n\t\t\t\tswitch(to.path) {\r\n\t\t\t\t    case '/home':\r\n\t\t\t\t\t\tpath = '首页';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t    case '/login':\r\n\t\t\t\t\t\tpath = '登录';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '/doc-list':\r\n\t\t\t\t\t\tpath = '专家介绍';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '/doc-case':\r\n\t\t\t\t\t\tpath = '医院案例';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '/dynamic':\r\n\t\t\t\t\t\tpath = '医院动态';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '/discount':\r\n\t\t\t\t\t\tpath = '医院优惠';\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t    default:\r\n\t\t\t\t        path = '其它页面';\r\n\t\t\t\t} \r\n\t\t\t\tlet isTo = window.confirm(`您确定要去往${path}了吗?`)\r\n\t\t\t\tisTo ? next(true) : next(false)\r\n\t\t\t}else{\r\n\t\t\t\tnext()\r\n\t\t\t}\r\n\t\t  \r\n\t\t},\r\n\t\t\r\n\t}\n</script>\n\n<style >\r\n\t.reg .reg__ul{\r\n\t\tmargin:.1rem .1rem .18rem .1rem;\r\n\t\tpadding:.08rem;\r\n\t\tbackground:#fff;\r\n\t}\r\n\t.reg .reg__ul li{\r\n\t\t\r\n\t\tdisplay: flex;\r\n\t\twidth: 100%;\r\n\t\tborder-radius: .03rem;\r\n\t\theight: .38rem;\r\n\t\tline-height: .38rem;\r\n\t\tpadding: 0 0.12rem;\r\n\t\tbox-sizing: border-box;\r\n\t\tmargin-bottom: .15rem;\r\n\t\tborder: .01rem solid rgba(80,80,80,0.29);\r\n\t\tposition: relative;\r\n\t}\r\n\t.reg .reg__ul li input{\r\n\t\tfont-size: .14rem;\r\n\t\twidth: 100%;\r\n\t}\r\n\t.reg .reg__ul li.reg__ul__telcode span{\r\n\t\tfont-size: .14rem;\r\n\t\tposition: absolute;\r\n\t\tz-index: 99;\r\n\t\tright: 0.1rem;\r\n\t\ttop: 0;\r\n\t\tcolor: #2D8DB9;\r\n\t\tcursor: pointer;\r\n\t}\r\n\t.reg .reg__ul .reg__ul__mess{\r\n\t\tdisplay: inline-block;\r\n\t\tcolor: #BF1001;\r\n\t\tfont-weight: 700;\r\n\t\t/* text-align: center; */\r\n\t\tfont-size: .14rem;\r\n\t\tborder: 0;\r\n\t}\r\n\t.reg .reg__ul .reg__ul__file{\r\n\t\tborder:0;\r\n\t}\r\n\t.reg .reg__ul .reg__ul__file h4{\r\n\t\tfont-weight: 100;\r\n\t\tfont-size: .14rem;\r\n\t\tcolor: #333;\r\n\t\twidth: 1.2rem;\r\n\t}\r\n\t.reg .reg__ul .reg__ul__file input{\r\n\t\tmargin-top:.06rem;\r\n\t}\n</style>\n"]}]}